<!DOCTYPE html>
<html lang="vi">
<head>
    <title>Minigame</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="stylesheet" href="assets/css/main.css" />
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Mini Game Specific Styles */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .game-card {
            background: rgba(30, 33, 57, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .game-card .icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .game-card h3 {
            color: var(--white);
            margin-bottom: 0.5rem;
            font-size: 1.3rem;
        }

        .game-card p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        /* Game Modal */
        .game-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            overflow-y: auto;
        }

        .game-modal.active {
            display: block;
        }

        .game-modal-content {
            position: relative;
            max-width: 900px;
            margin: 2rem auto;
            background: #1e2139;
            border-radius: 1rem;
            padding: 2rem;
        }

        .game-modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
        }

        .game-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        /* Individual Game Styles */
        .game-container {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            min-height: 500px;
        }

        /* Count Numbers Game */
        #count-game .items {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            margin: 2rem 0;
            min-height: 100px;
        }

        #count-game .item {
            font-size: 2.5rem;
        }

        /* Math Quiz Game */
        #math-game .question {
            font-size: 2.5rem;
            color: #2c3e50;
            margin: 2rem 0;
            font-weight: bold;
        }

        /* Common Button Styles */
        .game-btn {
            padding: 0.8rem 1.5rem;
            margin: 0.5rem;
            font-size: 1.1rem;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .game-btn:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .game-feedback {
            font-size: 1.3rem;
            margin: 1rem 0;
            font-weight: bold;
            min-height: 30px;
        }

        .game-score {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <div id="main">
            <div class="inner">

                <!-- Header -->
                <header id="header">
                    <a href="index.html" class="logo"><strong>Mini Games</strong> Gi√°o D·ª•c</a>
                </header>

                <!-- Content -->
                <section>
                    <header class="major">
                        <h1>Kho Mini Games Gi√°o D·ª•c</h1>
                        <p>H·ªçc t·∫≠p qua tr√≤ ch∆°i - Vui nh·ªôn, b·ªï √≠ch v√† ph√°t tri·ªÉn t∆∞ duy!</p>
                    </header>

                    <!-- Games Grid -->
                    <div class="game-grid">
                        <!-- Game 1: Ch·ªçn S·ªë ƒê·∫øm -->
                        <div class="game-card" onclick="openGame('count')">
                            <div class="icon">üî¢</div>
                            <h3>Ch·ªçn S·ªë ƒê·∫øm</h3>
                            <p>R√®n k·ªπ nƒÉng ƒë·∫øm s·ªë c∆° b·∫£n v·ªõi c√°c bi·ªÉu t∆∞·ª£ng vui nh·ªôn</p>
                        </div>

                        <!-- Game 2: L√†m Ph√©p To√°n -->
                        <div class="game-card" onclick="openGame('math')">
                            <div class="icon">‚ûï</div>
                            <h3>L√†m Ph√©p To√°n</h3>
                            <p>C·ªông, tr·ª´ nhanh v√† ch√≠nh x√°c ƒë·ªÉ n√¢ng cao k·ªπ nƒÉng t√≠nh to√°n</p>
                        </div>

                        <!-- Game 3: S·∫Øp X·∫øp S·ªë -->
                        <div class="game-card" onclick="openGame('sort')">
                            <div class="icon">üìä</div>
                            <h3>S·∫Øp X·∫øp S·ªë</h3>
                            <p>R√®n t∆∞ duy logic v√† th·ª© t·ª± s·ªë h·ªçc</p>
                        </div>

                        <!-- Game 4: ƒêua Xe To√°n H·ªçc -->
                        <div class="game-card" onclick="openGame('racing')">
                            <div class="icon">üèÅ</div>
                            <h3>ƒêua Xe To√°n H·ªçc</h3>
                            <p>K·∫øt h·ª£p t·ªëc ƒë·ªô v√† to√°n h·ªçc trong cu·ªôc ƒëua h·∫•p d·∫´n</p>
                        </div>

                        <!-- Game 5: Ph√¢n Lo·∫°i ƒê·ªông V·∫≠t -->
                        <div class="game-card" onclick="openGame('animal')">
                            <div class="icon">üêò</div>
                            <h3>Ph√¢n Lo·∫°i ƒê·ªông V·∫≠t</h3>
                            <p>Ki·∫øn th·ª©c sinh h·ªçc vui nh·ªôn v·ªÅ th·∫ø gi·ªõi ƒë·ªông v·∫≠t</p>
                        </div>

                        <!-- Game 6: Tr·ªôn M√†u S·∫Øc -->
                        <div class="game-card" onclick="openGame('color')">
                            <div class="icon">üé®</div>
                            <h3>Tr·ªôn M√†u S·∫Øc</h3>
                            <p>H·ªçc pha m√†u c∆° b·∫£n v√† s√°ng t·∫°o ngh·ªá thu·∫≠t</p>
                        </div>

                        <!-- Game 7: X·∫øp Kh·ªëi To√°n H·ªçc -->
                        <div class="game-card" onclick="openGame('blocks')">
                            <div class="icon">üß±</div>
                            <h3>X·∫øp Kh·ªëi To√°n H·ªçc</h3>
                            <p>T∆∞ duy kh√¥ng gian & h√¨nh h·ªçc qua c√°c kh·ªëi 3D</p>
                        </div>

                        <!-- Game 8: Kh√°m Ph√° H·ªá M·∫∑t Tr·ªùi -->
                        <div class="game-card" onclick="openGame('solar')">
                            <div class="icon">üåå</div>
                            <h3>Kh√°m Ph√° H·ªá M·∫∑t Tr·ªùi</h3>
                            <p>Thi√™n vƒÉn h·ªçc cho b√© - T√¨m hi·ªÉu c√°c h√†nh tinh</p>
                        </div>
                    </div>
                </section>

            </div>
        </div>

        <!-- Sidebar -->
        <aside id="sidebar" role="complementary" aria-label="Thanh ƒëi·ªÅu h∆∞·ªõng">
            <div class="inner">

                <!-- Search -->
                <section id="search" class="alt" aria-label="T√¨m ki·∫øm">
                    <form method="get" action="#" role="search">
                        <input type="text" name="query" id="query" placeholder="T√¨m ki·∫øm...">
                    </form>
                </section>

                <!-- Menu -->
                <nav id="menu" role="navigation" aria-label="Menu ch√≠nh">
                    <header class="major"><h2>Menu</h2></header>
                    <ul>
                        <li><a href="index.html">Trang ch·ªß</a></li>

                        <li>
                            <span class="opener" role="button" tabindex="0">V·∫≠t l√Ω</span>
                            <ul>
                                <li><a href="cohoc.html">C∆° h·ªçc</a></li>
                                <li><a href="amhoc.html">√Çm h·ªçc & S√≥ng</a></li>
                                <li><a href="cong-nangluong.html">C√¥ng, nƒÉng l∆∞·ª£ng & c√¥ng su·∫•t</a></li>
                                <li><a href="nhiethoc.html">Nhi·ªát & Nhi·ªát ƒë·ªông l·ª±c h·ªçc</a></li>
                                <li><a href="luongtu.html">Hi·ªán t∆∞·ª£ng l∆∞·ª£ng t·ª≠</a></li>
                                <li><a href="quanghoc.html">√Ånh s√°ng & B·ª©c x·∫°</a></li>
                                <li><a href="dientu.html">ƒêi·ªán, T·ª´ & M·∫°ch ƒëi·ªán</a></li>
                            </ul>
                        </li>

                        <li>
                            <span class="opener" role="button" tabindex="0">To√°n v√† Th·ªëng k√™</span>
                            <ul>
                                <li><a href="toanhoc.html">Kh√°i ni·ªám to√°n h·ªçc</a></li>
                                <li><a href="toan-ungdung.html">·ª®ng d·ª•ng to√°n h·ªçc</a></li>
                            </ul>
                        </li>

                        <li>
                            <span class="opener" role="button" tabindex="0">Ho√° h·ªçc</span>
                            <ul>
                                <li><a href="hoahoc.html">Ho√° ƒë·∫°i c∆∞∆°ng</a></li>
                                <li><a href="hoaluongtu.html">Ho√° l∆∞·ª£ng t·ª≠</a></li>
                            </ul>
                        </li>

                        <li><a href="khoangkhong.html">Tr√°i ƒë·∫•t v√† Kh√¥ng gian</a></li>
                        <li><a href="sinhhoc.html">Sinh h·ªçc</a></li>
                        <li><a href="minigame.html">Mini game</a></li>
                    </ul>
                </nav>

                <!-- Li√™n h·ªá -->
                <section aria-label="Li√™n h·ªá">
                    <header class="major"><h2>Li√™n h·ªá</h2></header>
                    <p>Li√™n h·ªá v·ªõi IBME Lab:</p>
                    <ul class="contact">
                        <li>
                            <i class="fa-solid fa-envelope icon" aria-hidden="true"></i>
                            <a href="mailto:information@untitled.tld">information<br>@untitled.tld</a>
                        </li>
                        <li>
                            <i class="fa-solid fa-phone icon" aria-hidden="true"></i>
                            <span>(000) 000-0000</span>
                        </li>
                        <li>
                            <i class="fa-solid fa-house icon" aria-hidden="true"></i>
                            <span>1234 Somewhere Road #8254<br>Nashville, TN 00000-0000</span>
                        </li>
                    </ul>
                </section>

                <!-- Footer -->
                <footer id="footer" role="contentinfo">
                    <p class="copyright">&copy; Design: Nguy·ªÖn Quang ·∫¢nh.</p>
                </footer>

            </div>
        </aside>

    </div>

    <!-- Game Modals -->
    <div id="gameModal" class="game-modal">
        <div class="game-modal-content">
            <button class="game-modal-close" onclick="closeGame()">&times;</button>
            <div id="gameContent"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/nutnhan.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Mini Games Scripts -->
    <script>
        // Game Data
        const games = {
            count: {
                title: 'üçé Ch·ªçn S·ªë ƒê·∫øm',
                init: initCountGame
            },
            math: {
                title: '‚ûï L√†m Ph√©p To√°n',
                init: initMathGame
            },
            sort: {
                title: 'üî¢ S·∫Øp X·∫øp S·ªë',
                init: initSortGame
            },
            racing: {
                title: 'üèÅ ƒêua Xe To√°n H·ªçc',
                init: initRacingGame
            },
            animal: {
                title: 'üêò Ph√¢n Lo·∫°i ƒê·ªông V·∫≠t',
                init: initAnimalGame
            },
            color: {
                title: 'üé® Tr·ªôn M√†u S·∫Øc',
                init: initColorGame
            },
            blocks: {
                title: 'üß± X·∫øp Kh·ªëi To√°n H·ªçc',
                init: initBlocksGame
            },
            solar: {
                title: 'üåå Kh√°m Ph√° H·ªá M·∫∑t Tr·ªùi',
                init: initSolarGame
            }
        };

        function openGame(gameType) {
            const modal = document.getElementById('gameModal');
            const content = document.getElementById('gameContent');
            
            if (games[gameType]) {
                modal.classList.add('active');
                content.innerHTML = '';
                games[gameType].init(content);
            }
        }

        function closeGame() {
            document.getElementById('gameModal').classList.remove('active');
        }

        // Game 1: Count Numbers
        function initCountGame(container) {
            let score = 0, questionCount = 0;
            const MAX_QUESTIONS = 5;
            const emojis = ['üçé','üê∂','üåü','üéà','üçï','üê±','‚öΩ','üìö','üåà','üç¶'];
            
            container.innerHTML = `
                <div id="count-game" class="game-container" style="text-align: center;">
                    <h2 style="color: #e74c3c;">üçé Ch·ªçn S·ªë ƒê·∫øm üçé</h2>
                    <div class="game-score">ƒêi·ªÉm: <span id="count-score">0</span>/5</div>
                    <div class="items"></div>
                    <div class="game-feedback"></div>
                    <div id="count-options"></div>
                </div>
            `;

            function generateQuestion() {
                if (questionCount >= MAX_QUESTIONS) {
                    showEndGame();
                    return;
                }
                
                const itemCount = Math.floor(Math.random() * 10) + 1;
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                const itemsDiv = container.querySelector('.items');
                itemsDiv.innerHTML = '';
                
                for (let i = 0; i < itemCount; i++) {
                    const span = document.createElement('span');
                    span.className = 'item';
                    span.textContent = emoji;
                    itemsDiv.appendChild(span);
                }
                
                const options = new Set([itemCount]);
                while (options.size < 4) {
                    options.add(Math.floor(Math.random() * 10) + 1);
                }
                
                const optionsDiv = container.querySelector('#count-options');
                optionsDiv.innerHTML = '';
                
                Array.from(options).sort(() => 0.5 - Math.random()).forEach(num => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = num;
                    btn.onclick = () => handleAnswer(num, itemCount);
                    optionsDiv.appendChild(btn);
                });
                
                container.querySelector('.game-feedback').textContent = '';
            }

            function handleAnswer(selected, correct) {
                const feedback = container.querySelector('.game-feedback');
                container.querySelectorAll('.game-btn').forEach(btn => btn.disabled = true);
                
                if (selected === correct) {
                    score++;
                    feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi! Tuy·ªát qu√°!';
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√† ${correct}.`;
                    feedback.style.color = '#e74c3c';
                }
                
                container.querySelector('#count-score').textContent = score;
                questionCount++;
                setTimeout(generateQuestion, 1500);
            }

            function showEndGame() {
                container.querySelector('.items').innerHTML = 'üéâ Ho√†n th√†nh! üéâ';
                container.querySelector('#count-options').innerHTML = '';
                container.querySelector('.game-feedback').innerHTML = `<h2>ƒêi·ªÉm c·ªßa b·∫°n: ${score}/${MAX_QUESTIONS}</h2>`;
                
                const restartBtn = document.createElement('button');
                restartBtn.className = 'game-btn';
                restartBtn.textContent = 'Ch∆°i l·∫°i';
                restartBtn.style.background = '#e74c3c';
                restartBtn.onclick = () => {
                    score = 0;
                    questionCount = 0;
                    generateQuestion();
                };
                container.querySelector('#count-options').appendChild(restartBtn);
            }

            generateQuestion();
        }

        // Game 2: Math Quiz
        function initMathGame(container) {
            let score = 0, questionCount = 0;
            const MAX_QUESTIONS = 5;
            
            container.innerHTML = `
                <div id="math-game" class="game-container" style="text-align: center;">
                    <h2 style="color: #3498db;">‚ûï L√†m Ph√©p To√°n ‚ûñ</h2>
                    <div class="game-score">ƒêi·ªÉm: <span id="math-score">0</span>/5</div>
                    <div class="question">?</div>
                    <div class="game-feedback"></div>
                    <div id="math-options"></div>
                </div>
            `;

            function generateQuestion() {
                if (questionCount >= MAX_QUESTIONS) {
                    showEndGame();
                    return;
                }
                
                const num1 = Math.floor(Math.random() * 15) + 1;
                const num2 = Math.floor(Math.random() * 10) + 1;
                const op = Math.random() > 0.5 ? '+' : '-';
                let correctAnswer, expression;
                
                if (op === '+') {
                    correctAnswer = num1 + num2;
                    expression = `${num1} + ${num2} = ?`;
                } else {
                    const a = Math.max(num1, num2);
                    const b = Math.min(num1, num2);
                    correctAnswer = a - b;
                    expression = `${a} - ${b} = ?`;
                }
                
                container.querySelector('.question').textContent = expression;
                
                const options = new Set([correctAnswer]);
                while (options.size < 4) {
                    const wrong = correctAnswer + (Math.floor(Math.random() * 7) - 3);
                    if (wrong >= 0) options.add(wrong);
                }
                
                const optionsDiv = container.querySelector('#math-options');
                optionsDiv.innerHTML = '';
                
                Array.from(options).sort(() => 0.5 - Math.random()).forEach(num => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = num;
                    btn.onclick = () => handleAnswer(num, correctAnswer);
                    optionsDiv.appendChild(btn);
                });
                
                container.querySelector('.game-feedback').textContent = '';
            }

            function handleAnswer(selected, correct) {
                const feedback = container.querySelector('.game-feedback');
                container.querySelectorAll('.game-btn').forEach(btn => btn.disabled = true);
                
                if (selected === correct) {
                    score++;
                    feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi! Gi·ªèi qu√°!';
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√† ${correct}.`;
                    feedback.style.color = '#e74c3c';
                }
                
                container.querySelector('#math-score').textContent = score;
                questionCount++;
                setTimeout(generateQuestion, 1500);
            }

            function showEndGame() {
                container.querySelector('.question').textContent = 'üéâ Ho√†n th√†nh! üéâ';
                container.querySelector('#math-options').innerHTML = '';
                container.querySelector('.game-feedback').innerHTML = `<h2>ƒêi·ªÉm c·ªßa b·∫°n: ${score}/${MAX_QUESTIONS}</h2>`;
                
                const restartBtn = document.createElement('button');
                restartBtn.className = 'game-btn';
                restartBtn.textContent = 'Ch∆°i l·∫°i';
                restartBtn.style.background = '#e67e22';
                restartBtn.onclick = () => {
                    score = 0;
                    questionCount = 0;
                    generateQuestion();
                };
                container.querySelector('#math-options').appendChild(restartBtn);
            }

            generateQuestion();
        }

        // Game 3: Sort Numbers (Simplified)
        function initSortGame(container) {
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #e74c3c;">üî¢ S·∫Øp X·∫øp S·ªë üî¢</h2>
                    <p>Ch·ªçn c√°c s·ªë theo th·ª© t·ª± <b>tƒÉng d·∫ßn</b>!</p>
                    <div id="sort-numbers" style="margin: 20px 0;"></div>
                    <div class="game-feedback"></div>
                    <button class="game-btn" onclick="initSortGame(document.getElementById('gameContent'))">Ch∆°i l·∫°i</button>
                </div>
            `;

            const numbers = [];
            for (let i = 0; i < 5; i++) {
                numbers.push(Math.floor(Math.random() * 50) + 1);
            }
            
            const sorted = [...numbers].sort((a, b) => a - b);
            const shuffled = [...numbers].sort(() => 0.5 - Math.random());
            
            const numsDiv = container.querySelector('#sort-numbers');
            let selectedOrder = [];
            
            shuffled.forEach(num => {
                const btn = document.createElement('button');
                btn.className = 'game-btn';
                btn.textContent = num;
                btn.style.margin = '5px';
                btn.onclick = function() {
                    if (!this.disabled) {
                        this.disabled = true;
                        this.style.background = '#95a5a6';
                        selectedOrder.push(num);
                        
                        if (selectedOrder.length === numbers.length) {
                            checkOrder();
                        }
                    }
                };
                numsDiv.appendChild(btn);
            });

            function checkOrder() {
                const feedback = container.querySelector('.game-feedback');
                const isCorrect = selectedOrder.every((val, i) => val === sorted[i]);
                
                if (isCorrect) {
                    feedback.textContent = '‚úÖ Tuy·ªát v·ªùi! B·∫°n ƒë√£ s·∫Øp x·∫øp ƒë√∫ng!';
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = '‚ùå Ch∆∞a ƒë√∫ng! Th·ª© t·ª± ƒë√∫ng l√†: ' + sorted.join(', ');
                    feedback.style.color = '#e74c3c';
                }
            }
        }

        // Game 4: Racing (Simplified)
        function initRacingGame(container) {
            let position = 0;
            const TRACK_LENGTH = 100;
            
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #f39c12;">üèÅ ƒêua Xe To√°n H·ªçc üèÅ</h2>
                    <div style="position: relative; height: 60px; background: #34495e; border-radius: 8px; margin: 20px 0;">
                        <div id="car" style="position: absolute; left: 0; top: 10px; font-size: 40px; transition: left 0.5s;">üöó</div>
                        <div style="position: absolute; right: 10px; top: 10px; font-size: 40px;">üèÅ</div>
                    </div>
                    <div id="race-question" style="font-size: 2rem; color: #2c3e50; margin: 20px 0;">?</div>
                    <div class="game-feedback"></div>
                    <div id="race-options"></div>
                </div>
            `;

            function generateQuestion() {
                const num1 = Math.floor(Math.random() * 10) + 1;
                const num2 = Math.floor(Math.random() * 10) + 1;
                const correct = num1 + num2;
                
                container.querySelector('#race-question').textContent = `${num1} + ${num2} = ?`;
                
                const options = [correct, correct + 1, correct - 1, correct + 2];
                const optionsDiv = container.querySelector('#race-options');
                optionsDiv.innerHTML = '';
                
                options.sort(() => 0.5 - Math.random()).forEach(ans => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = ans;
                    btn.onclick = () => handleAnswer(ans === correct);
                    optionsDiv.appendChild(btn);
                });
            }

            function handleAnswer(isCorrect) {
                const feedback = container.querySelector('.game-feedback');
                
                if (isCorrect) {
                    position += 20;
                    container.querySelector('#car').style.left = position + '%';
                    feedback.textContent = '‚úÖ ƒê√∫ng! Xe tƒÉng t·ªëc!';
                    feedback.style.color = '#27ae60';
                    
                    if (position >= TRACK_LENGTH) {
                        feedback.innerHTML = '<h2 style="color:#27ae60">üéâ B·∫°n ƒë√£ v·ªÅ ƒë√≠ch! üèÜ</h2>';
                        container.querySelector('#race-options').innerHTML = '';
                    } else {
                        setTimeout(generateQuestion, 1000);
                    }
                } else {
                    feedback.textContent = '‚ùå Sai r·ªìi! Th·ª≠ l·∫°i!';
                    feedback.style.color = '#e74c3c';
                    setTimeout(generateQuestion, 1500);
                }
            }

            generateQuestion();
        }

        // Game 5: Animal Sort (Simplified)
        function initAnimalGame(container) {
            const animals = {
                land: ['ü¶Å', 'üêØ', 'üêò'],
                water: ['üê¨', 'üêô', 'üê†'],
                air: ['ü¶Ö', 'ü¶ã', 'üê¶']
            };
            
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #e67e22;">üêò Ph√¢n Lo·∫°i ƒê·ªông V·∫≠t üê†</h2>
                    <p>Ch·ªçn ƒë√∫ng m√¥i tr∆∞·ªùng s·ªëng c·ªßa ƒë·ªông v·∫≠t!</p>
                    <div id="animal-display" style="font-size: 4rem; margin: 20px 0;">?</div>
                    <div class="game-feedback"></div>
                    <div id="animal-options"></div>
                </div>
            `;

            function showAnimal() {
                const categories = Object.keys(animals);
                const category = categories[Math.floor(Math.random() * categories.length)];
                const animal = animals[category][Math.floor(Math.random() * animals[category].length)];
                
                container.querySelector('#animal-display').textContent = animal;
                
                const optionsDiv = container.querySelector('#animal-options');
                optionsDiv.innerHTML = '';
                
                const options = [
                    { text: 'Tr√™n c·∫°n üêæ', value: 'land' },
                    { text: 'D∆∞·ªõi n∆∞·ªõc üåä', value: 'water' },
                    { text: 'Bi·∫øt bay üïäÔ∏è', value: 'air' }
                ];
                
                options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = opt.text;
                    btn.onclick = () => checkAnswer(opt.value, category, animal);
                    optionsDiv.appendChild(btn);
                });
            }

            function checkAnswer(selected, correct, animal) {
                const feedback = container.querySelector('.game-feedback');
                
                if (selected === correct) {
                    feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi! ' + animal + ' s·ªëng ' + 
                        (correct === 'land' ? 'tr√™n c·∫°n' : correct === 'water' ? 'd∆∞·ªõi n∆∞·ªõc' : 'bi·∫øt bay');
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = '‚ùå Sai r·ªìi! Th·ª≠ l·∫°i nh√©!';
                    feedback.style.color = '#e74c3c';
                }
                
                setTimeout(showAnimal, 2000);
            }

            showAnimal();
        }

        // Game 6: Color Mix
        function initColorGame(container) {
            let firstColor = null;
            
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #9b59b6;">üé® Tr·ªôn M√†u S·∫Øc</h2>
                    <p>Ch·ªçn 2 m√†u ƒë·ªÉ xem k·∫øt qu·∫£ pha tr·ªôn!</p>
                    <div style="display: flex; justify-content: center; gap: 20px; margin: 30px 0;">
                        <div id="red" onclick="selectColor('red')" style="width: 80px; height: 80px; background: red; border-radius: 50%; cursor: pointer; box-shadow: 0 3px 8px rgba(0,0,0,0.3);"></div>
                        <div id="yellow" onclick="selectColor('yellow')" style="width: 80px; height: 80px; background: yellow; border-radius: 50%; cursor: pointer; box-shadow: 0 3px 8px rgba(0,0,0,0.3);"></div>
                        <div id="blue" onclick="selectColor('blue')" style="width: 80px; height: 80px; background: blue; border-radius: 50%; cursor: pointer; box-shadow: 0 3px 8px rgba(0,0,0,0.3);"></div>
                    </div>
                    <div id="color-selected" style="font-size: 1.2rem; margin: 20px 0; min-height: 30px;"></div>
                    <div id="color-result" style="width: 120px; height: 120px; margin: 20px auto; border-radius: 20px; background: #eee; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem;">?</div>
                </div>
            `;

            window.selectColor = function(color) {
                const colorNames = { red: "ƒê·ªè", yellow: "V√†ng", blue: "Xanh d∆∞∆°ng" };
                const results = {
                    "red+yellow": { color: "orange", name: "Cam" },
                    "yellow+red": { color: "orange", name: "Cam" },
                    "red+blue": { color: "purple", name: "T√≠m" },
                    "blue+red": { color: "purple", name: "T√≠m" },
                    "yellow+blue": { color: "green", name: "Xanh l√°" },
                    "blue+yellow": { color: "green", name: "Xanh l√°" }
                };

                if (!firstColor) {
                    firstColor = color;
                    document.getElementById('color-selected').textContent = `ƒê√£ ch·ªçn: ${colorNames[color]}`;
                } else {
                    const key = firstColor + "+" + color;
                    const result = results[key];
                    
                    if (result) {
                        document.getElementById('color-result').style.background = result.color;
                        document.getElementById('color-result').textContent = result.name;
                        document.getElementById('color-result').style.color = 'white';
                    }
                    
                    firstColor = null;
                    document.getElementById('color-selected').textContent = '';
                }
            };
        }

        // Game 7: Math Blocks
        function initBlocksGame(container) {
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #3498db;">üß± X·∫øp Kh·ªëi To√°n H·ªçc</h2>
                    <p>ƒê·∫øm xem c√≥ bao nhi√™u kh·ªëi l·∫≠p ph∆∞∆°ng?</p>
                    <div id="blocks-display" style="margin: 30px 0;"></div>
                    <div class="game-feedback"></div>
                    <div id="blocks-options"></div>
                </div>
            `;

            function generateBlocks() {
                const count = Math.floor(Math.random() * 8) + 3;
                const display = container.querySelector('#blocks-display');
                display.innerHTML = '';
                
                for (let i = 0; i < count; i++) {
                    const block = document.createElement('div');
                    block.style.cssText = 'width: 40px; height: 40px; background: #3498db; margin: 3px; display: inline-block; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);';
                    display.appendChild(block);
                }
                
                const options = [count, count + 1, count - 1, count + 2];
                const optionsDiv = container.querySelector('#blocks-options');
                optionsDiv.innerHTML = '';
                
                options.filter(n => n > 0).sort(() => 0.5 - Math.random()).forEach(num => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = num;
                    btn.onclick = () => checkAnswer(num, count);
                    optionsDiv.appendChild(btn);
                });
            }

            function checkAnswer(selected, correct) {
                const feedback = container.querySelector('.game-feedback');
                
                if (selected === correct) {
                    feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi!';
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = `‚ùå Sai! ƒê√°p √°n ƒë√∫ng l√† ${correct}`;
                    feedback.style.color = '#e74c3c';
                }
                
                setTimeout(generateBlocks, 2000);
            }

            generateBlocks();
        }

        // Game 8: Solar System
        function initSolarGame(container) {
            const planets = [
                { name: "Sao Thu·ª∑", order: 1, fact: "G·∫ßn M·∫∑t Tr·ªùi nh·∫•t" },
                { name: "Sao Kim", order: 2, fact: "N√≥ng nh·∫•t" },
                { name: "Tr√°i ƒê·∫•t", order: 3, fact: "C√≥ s·ª± s·ªëng" },
                { name: "Sao Ho·∫£", order: 4, fact: "H√†nh tinh ƒë·ªè" },
                { name: "Sao M·ªôc", order: 5, fact: "L·ªõn nh·∫•t" },
                { name: "Sao Th·ªï", order: 6, fact: "C√≥ v√†nh ƒëai" },
                { name: "Sao Thi√™n V∆∞∆°ng", order: 7, fact: "Nghi√™ng 98 ƒë·ªô" },
                { name: "Sao H·∫£i V∆∞∆°ng", order: 8, fact: "Xa nh·∫•t" }
            ];
            
            container.innerHTML = `
                <div class="game-container" style="text-align: center;">
                    <h2 style="color: #2c3e50;">üåå Kh√°m Ph√° H·ªá M·∫∑t Tr·ªùi</h2>
                    <p id="solar-question">?</p>
                    <div class="game-feedback"></div>
                    <div id="solar-options"></div>
                </div>
            `;

            function askQuestion() {
                const planet = planets[Math.floor(Math.random() * planets.length)];
                const questionType = Math.random() > 0.5 ? 'order' : 'fact';
                
                if (questionType === 'order') {
                    container.querySelector('#solar-question').textContent = 
                        `${planet.name} l√† h√†nh tinh th·ª© m·∫•y t√≠nh t·ª´ M·∫∑t Tr·ªùi?`;
                    
                    const options = [planet.order, planet.order + 1, planet.order - 1, planet.order + 2];
                    showOptions(options.filter(n => n > 0 && n <= 8), planet.order);
                } else {
                    container.querySelector('#solar-question').textContent = 
                        `H√†nh tinh n√†o ${planet.fact.toLowerCase()}?`;
                    
                    const wrongPlanets = planets.filter(p => p.name !== planet.name);
                    const options = [planet.name];
                    for (let i = 0; i < 3 && i < wrongPlanets.length; i++) {
                        options.push(wrongPlanets[Math.floor(Math.random() * wrongPlanets.length)].name);
                    }
                    showPlanetOptions(options, planet.name);
                }
            }

            function showOptions(options, correct) {
                const optionsDiv = container.querySelector('#solar-options');
                optionsDiv.innerHTML = '';
                
                options.sort(() => 0.5 - Math.random()).forEach(num => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = `Th·ª© ${num}`;
                    btn.onclick = () => checkAnswer(num === correct);
                    optionsDiv.appendChild(btn);
                });
            }

            function showPlanetOptions(options, correct) {
                const optionsDiv = container.querySelector('#solar-options');
                optionsDiv.innerHTML = '';
                
                options.sort(() => 0.5 - Math.random()).forEach(name => {
                    const btn = document.createElement('button');
                    btn.className = 'game-btn';
                    btn.textContent = name;
                    btn.onclick = () => checkAnswer(name === correct);
                    optionsDiv.appendChild(btn);
                });
            }

            function checkAnswer(isCorrect) {
                const feedback = container.querySelector('.game-feedback');
                
                if (isCorrect) {
                    feedback.textContent = '‚úÖ ƒê√∫ng r·ªìi! B·∫°n th·∫≠t gi·ªèi!';
                    feedback.style.color = '#27ae60';
                } else {
                    feedback.textContent = '‚ùå Sai r·ªìi! Th·ª≠ l·∫°i nh√©!';
                    feedback.style.color = '#e74c3c';
                }
                
                setTimeout(askQuestion, 2000);
            }

            askQuestion();
        }

        // Close modal when clicking outside
        document.getElementById('gameModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeGame();
            }
        });

        // ESC key to close modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeGame();
            }
        });
    </script>

</body>
</html>